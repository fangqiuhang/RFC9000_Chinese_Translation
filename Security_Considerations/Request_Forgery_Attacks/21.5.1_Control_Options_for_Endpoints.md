---
title: "21.5.1. 控制终端的途径"
anchor: "21.5.1_Control_Options_for_Endpoints"
weight: 210510
rank: "h3"
---

QUIC offers some opportunities for an attacker to influence or control where its peer sends UDP datagrams:

QUIC给了攻击者一些影响或操纵其对端的UDP数据报发送目标的机会：

* initial connection establishment (Section 7), where a server is able to choose where a client sends datagrams -- for example, by populating DNS records;

* 初始的连接建立（详见[第7章]()），此时服务器拥有操纵客户端的数据包发送目标的能力——例如，通过填写DNS记录的方式；

* preferred addresses (Section 9.6), where a server is able to choose where a client sends datagrams;

* 首选地址（详见[第9.6章]()），此时服务器拥有操纵客户端的数据包发送目标的能力；

* spoofed connection migrations (Section 9.3.1), where a client is able to use source address spoofing to select where a server sends subsequent datagrams; and

* 虚假的连接迁移（详见[第9.3.1章]()），此时客户端具有使用伪造的源地址来操纵服务器后续数据报的发送目标的能力；以及

* spoofed packets that cause a server to send a Version Negotiation packet (Section 21.5.5).

* 伪造的数据包，这能令服务器发送版本协商数据包（详见[第21.5.5章]()）。

In all cases, the attacker can cause its peer to send datagrams to a victim that might not understand QUIC. That is, these packets are sent by the peer prior to address validation; see Section 8.

在任一情况下，攻击者都能令其对端向某个受害者发送数据报，无论受害者能不能理解QUIC。也就是说，这些数据包会在对端进行地址验证前就被发送出去；详见[第8章]()。

Outside of the encrypted portion of packets, QUIC offers an endpoint several options for controlling the content of UDP datagrams that its peer sends. The Destination Connection ID field offers direct control over bytes that appear early in packets sent by the peer; see Section 5.1. The Token field in Initial packets offers a server control over other bytes of Initial packets; see Section 17.2.2.

在数据包经加密的部分之外，QUIC给予了终端一些可选项，用于控制其对端发送的UDP数据报的内容。目标连接ID字段提供了针对对端发送的数据包中位置靠前的字节的直接控制；详见[第5.1章]()。初始数据包中的令牌字段提供了针对初始数据包中其他字节的控制；详见[第17.2.2章]()。

There are no measures in this version of QUIC to prevent indirect control over the encrypted portions of packets. It is necessary to assume that endpoints are able to control the contents of frames that a peer sends, especially those frames that convey application data, such as STREAM frames. Though this depends to some degree on details of the application protocol, some control is possible in many protocol usage contexts. As the attacker has access to packet protection keys, they are likely to be capable of predicting how a peer will encrypt future packets. Successful control over datagram content then only requires that the attacker be able to predict the packet number and placement of frames in packets with some amount of reliability.

在本QUIC版本中没有任何方法来阻止针对数据包中经加密的部分的间接控制。假定终端能够控制对端所发送的帧内容是很有必要的，尤其是那些传递应用数据的帧，例如**流帧**。尽管它在某种程度上依赖于应用协议的细节部分，但是在诸多协议的使用场景中都有可能出现某些控制方式。只要攻击者能访问到数据包保护密钥，它们就有能力预测对端会如何加密后续数据包。于是，要成功控制数据报内容，只需要攻击者有能力预测数据包号和数据包中的帧大概率会出现的位置。

This section assumes that limiting control over datagram content is not feasible. The focus of the mitigations in subsequent sections is on limiting the ways in which datagrams that are sent prior to address validation can be used for request forgery.

本节假定了我们无法限制攻击者对数据报内容的控制。在后续章节中，抵御手段的重点在于限制数据报会在进行地址验证前就被发送出去的情况，以防止它们被用于进行请求伪造。
