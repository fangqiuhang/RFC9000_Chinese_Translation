---
title: "10.2.2 连接的排空状态"
anchor: "10.2.2_Draining_Connection_State"
weight: 1022
rank: "h3"
---

The draining state is entered once an endpoint receives a CONNECTION_CLOSE frame, which indicates that its peer is closing or draining. While otherwise identical to the closing state, an endpoint in the draining state MUST NOT send any packets. Retaining packet protection keys is unnecessary once a connection is in the draining state.

一旦终端接收到**连接关闭帧**，他就会进入排空状态，这表明对端已处于关闭或排空状态。虽然在其他方面都和关闭状态一致，不过处于排空状态的终端{{< req_level MUST_NOT >}}发送任何数据包。一旦连接处于排空状态，就没有必要再保留数据包保护密钥了。

An endpoint that receives a CONNECTION_CLOSE frame MAY send a single packet containing a CONNECTION_CLOSE frame before entering the draining state, using a NO_ERROR code if appropriate. An endpoint MUST NOT send further packets. Doing so could result in a constant exchange of CONNECTION_CLOSE frames until one of the endpoints exits the closing state.

接收到**连接关闭帧**的终端{{< req_level MAY >}}再进入排空状态前发送一个包含**连接关闭帧**的数据包，并且，如若合适，使用`NO_ERROR`（无错误）代码。除此之外，终端{{< req_level MUST_NOT >}}发送更多数据包。不这么做会导致两个终端间保持不断交换**连接关闭帧**的状态，直到其中一个终端退出关闭状态。

An endpoint MAY enter the draining state from the closing state if it receives a CONNECTION_CLOSE frame, which indicates that the peer is also closing or draining. In this case, the draining state ends when the closing state would have ended. In other words, the endpoint uses the same end time but ceases transmission of any packets on this connection.

如果终端接收到了**连接关闭帧**，那么它{{< req_level MAY >}}从关闭状态进入排空状态，这表明对端也处于关闭或排空状态。在这种情况下，排空状态会在原来关闭状态应该结束时结束。换句话说，终端使用相同的状态结束时机但是不再再这条连接上传输数据包。
