---
title: "21.8. 流占用攻击"
anchor: "21.8_Stream_Commitment_Attack"
weight: 210800
rank: "h2"
---

An adversarial endpoint can open a large number of streams, exhausting state on an endpoint. The adversarial endpoint could repeat the process on a large number of connections, in a manner similar to SYN flooding attacks in TCP.

恶意的终端可以打开大量的流并耗尽终端的状态。恶意的终端可以在大量连接上重复此过程，就像TCP中的SYN泛洪攻击那样。

Normally, clients will open streams sequentially, as explained in Section 2.1. However, when several streams are initiated at short intervals, loss or reordering can cause STREAM frames that open streams to be received out of sequence. On receiving a higher-numbered stream ID, a receiver is required to open all intervening streams of the same type; see Section 3.2. Thus, on a new connection, opening stream 4000000 opens 1 million and 1 client-initiated bidirectional streams.

通常情况下，客户端会按顺序打开流，就像[第2.1章]()中解释的那样。然而，当短时间内发起多个流时，丢包或乱序会使得打开流的**流帧**被乱序地接收到。在接收到较高编号的流ID时，接收者需要打开同类型的所有低编号流；详见[第3.2章]()。因此，在一条新连接上，打开了编号为`4000000`的流就会打开一百万零一条由客户端发起的双向流。

The number of active streams is limited by the initial_max_streams_bidi and initial_max_streams_uni transport parameters as updated by any received MAX_STREAMS frames, as explained in Section 4.6. If chosen judiciously, these limits mitigate the effect of the stream commitment attack. However, setting the limit too low could affect performance when applications expect to open a large number of streams.

活跃流的数量是由传输参数`initial_max_streams_bidi`（初始最大双向流数量）和`initial_max_streams_uni`（初始最大单向流数量）限制的，并会随着接收到的**最大流帧**而被更新，如[第4.6章]()所述。只要审慎地选择，这些限制就能抵御流占用攻击会产生的效果。然而，将限制设置得过低则会在应用希望打开大量流时影响性能。
